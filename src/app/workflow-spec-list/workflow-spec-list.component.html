
<div class="container mat-typography" fxLayout="column" fxLayoutGap="10px">
  <h1>Workflow Specifications</h1>
  <div fxLayout="row" fxLayoutGap="10px">
    <button mat-flat-button color="primary" (click)="editWorkflowSpec()">
      <mat-icon>library_add</mat-icon>
      Add new workflow specification
    </button>
    <button mat-flat-button color="accent" (click)="editWorkflowSpecCategory()">
      <mat-icon>post_add</mat-icon>
      Add category
    </button>
  </div>
  <ng-container *ngFor="let cat of workflowSpecsByCategory">
    <ng-container *ngIf="!(cat.id === null && cat.workflow_specs.length === 0)">
      <div class="category" fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
        <h2>{{cat.display_name}} ({{cat.name}})</h2>
        <div class="category-actions" fxLayout="row" fxLayoutGap="10px" *ngIf="cat.id !== null">
          <button mat-mini-fab color="primary" (click)="editWorkflowSpecCategory(cat)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button title="Delete this category" color="warn" (click)="confirmDeleteWorkflowSpecCategory(cat)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
      <div *ngFor="let wfs of cat.workflow_specs" class="workflow-spec">
        <app-workflow-spec-card [workflowSpec]="wfs" [actionButtons]="actionButtons">
        </app-workflow-spec-card>
        <ng-template #actionButtons>
          <div class="workflow-spec-actions">
            <button mat-mini-fab color="primary" (click)="editWorkflowSpec(wfs)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button title="Delete this workflow specification" color="warn" (click)="confirmDeleteWorkflowSpec(wfs)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </ng-template>
      </div>
      <div *ngIf="cat.workflow_specs.length === 0">No workflow specs in this category</div>
    </ng-container>
  </ng-container>
</div>

